## 客户端即服务端

客户端即服务端，安装软件后，如果被控制他就是服务端，如果控制别人他就是客户端。

在linux可以直接用systemctl 启动和开机自启此服务，服务名为rustdesk.service。在windows上直接打开该软件即会开机自启。

如果需要用ip访问需要在网络设置中开启允许访问，默认端口号是21118。

**该程序的逻辑是如果在同一局域网内会默认优先使用直连，而不是用中继服务器**（用异地组网不一定可以用直连，因为直连需要先广播以获取被控端的回应，异地组网不一定支持广播，因此没有被控端回应就会用中继服务器）

## 中继服务器

中继服务器不是服务端也不是客户端，就是一个中继。

如果配置了中继服务器，需要**被控端和控制端的ID服务器和中继服务器选项都**要配置该中继服务器的公网ip，且需要填入key。

在安装rustdesk-server后，需要打开21115-21119的TCP端口和21116的UDP端口，然后利用systemd开机自启hbbr和hbbs即可。启动后会自动生成一个xxx_edxxx.pub的公钥，把他复制出来填入key中即可。